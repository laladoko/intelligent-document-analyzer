# ä¼ä¸šçŸ¥è¯†åº“æ™ºèƒ½é—®ç­”ç³»ç»Ÿ - è„šæœ¬ä½¿ç”¨è¯´æ˜ v2.4

## ğŸ“‹ è„šæœ¬æ€»è§ˆ

æœ¬ç³»ç»Ÿæä¾›äº†å®Œæ•´çš„ç®¡ç†è„šæœ¬é›†åˆï¼Œæ–¹ä¾¿å¼€å‘å’Œè¿ç»´ä½¿ç”¨ã€‚

## ğŸš€ ä¸»è¦è„šæœ¬

### 1. ç³»ç»Ÿå¯åŠ¨è„šæœ¬

#### `./start.sh` - ä¸€é”®å¯åŠ¨ç³»ç»Ÿ
```bash
./start.sh
```
**åŠŸèƒ½**ï¼š
- è‡ªåŠ¨æ£€æŸ¥ç¯å¢ƒä¾èµ–
- åˆ›å»ºPythonè™šæ‹Ÿç¯å¢ƒ
- å®‰è£…å‰åç«¯ä¾èµ–
- åˆå§‹åŒ–æ•°æ®åº“
- å¯åŠ¨åç«¯å’Œå‰ç«¯æœåŠ¡
- æä¾›å®Œæ•´çš„ç³»ç»Ÿä¿¡æ¯å’Œä½¿ç”¨æŒ‡å—

#### `./backend/start_backend.sh` - åç«¯ç‹¬ç«‹å¯åŠ¨
```bash
# å‰å°æ¨¡å¼ï¼ˆæ˜¾ç¤ºå®æ—¶æ—¥å¿—ï¼‰
cd backend && ./start_backend.sh

# åå°æ¨¡å¼ï¼ˆåå°è¿è¡Œï¼‰
cd backend && ./start_backend.sh background
```

#### `./frontend/start_frontend.sh` - å‰ç«¯ç‹¬ç«‹å¯åŠ¨
```bash
# å‰å°æ¨¡å¼
cd frontend && ./start_frontend.sh

# åå°æ¨¡å¼
cd frontend && ./start_frontend.sh background
```

### 2. ç³»ç»Ÿç®¡ç†è„šæœ¬

#### `./stop.sh` - åœæ­¢æ‰€æœ‰æœåŠ¡
```bash
./stop.sh
```
**åŠŸèƒ½**ï¼š
- æŸ¥æ‰¾å¹¶åœæ­¢åç«¯æœåŠ¡
- æŸ¥æ‰¾å¹¶åœæ­¢å‰ç«¯æœåŠ¡
- æ¸…ç†æ®‹ç•™è¿›ç¨‹
- æ£€æŸ¥ç«¯å£å ç”¨çŠ¶æ€

#### `./status.sh` - ç³»ç»ŸçŠ¶æ€æ£€æŸ¥
```bash
# å®Œæ•´çŠ¶æ€æ£€æŸ¥
./status.sh

# å•ç‹¬æ£€æŸ¥åç«¯
./status.sh backend

# å•ç‹¬æ£€æŸ¥å‰ç«¯
./status.sh frontend

# æ£€æŸ¥ç³»ç»Ÿèµ„æº
./status.sh system

# æ£€æŸ¥ç¯å¢ƒä¾èµ–
./status.sh env
```
**åŠŸèƒ½**ï¼š
- æ£€æŸ¥æœåŠ¡è¿è¡ŒçŠ¶æ€
- éªŒè¯ç«¯å£ç›‘å¬æƒ…å†µ
- APIå¥åº·æ£€æŸ¥
- ç³»ç»Ÿèµ„æºç›‘æ§
- ç¯å¢ƒä¾èµ–æ£€æŸ¥
- æ™ºèƒ½å»ºè®®ç”Ÿæˆ

### 3. æ—¥å¿—ç®¡ç†è„šæœ¬

#### `./logs.sh` - å®Œæ•´æ—¥å¿—ç®¡ç†å·¥å…·
```bash
./logs.sh
```
**åŠŸèƒ½èœå•**ï¼š
1. æŸ¥çœ‹åç«¯å®æ—¶æ—¥å¿— (tail -f)
2. æŸ¥çœ‹å‰ç«¯å®æ—¶æ—¥å¿— (tail -f)
3. æŸ¥çœ‹åç«¯å†å²æ—¥å¿—
4. æŸ¥çœ‹å‰ç«¯å†å²æ—¥å¿—
5. æŸ¥çœ‹æ‰€æœ‰æ—¥å¿—æ–‡ä»¶çŠ¶æ€
6. æ¸…ç†æ—¥å¿—æ–‡ä»¶ï¼ˆè‡ªåŠ¨å¤‡ä»½ï¼‰
7. å¯¼å‡ºæ—¥å¿—æ–‡ä»¶ï¼ˆZIPå‹ç¼©åŒ…ï¼‰
8. æŸ¥çœ‹ç³»ç»Ÿè¿›ç¨‹çŠ¶æ€

#### `./view-backend-logs.sh` - å¿«é€ŸæŸ¥çœ‹åç«¯æ—¥å¿—
```bash
./view-backend-logs.sh
```

#### `./view-frontend-logs.sh` - å¿«é€ŸæŸ¥çœ‹å‰ç«¯æ—¥å¿—
```bash
./view-frontend-logs.sh
```

## ğŸ“ æ—¥å¿—æ–‡ä»¶ä½ç½®

- **åç«¯æ—¥å¿—**: `backend/uvicorn.log`
- **å‰ç«¯æ—¥å¿—**: `frontend/nextjs.log`
- **æ—¥å¿—å¤‡ä»½**: `*.backup.*` æ ¼å¼
- **å¯¼å‡ºæ—¥å¿—**: `logs_YYYYMMDD_HHMMSS.tar.gz`

## ğŸ”§ å¸¸ç”¨æ“ä½œç»„åˆ

### å¼€å‘è°ƒè¯•æµç¨‹
```bash
# 1. æ£€æŸ¥ç³»ç»ŸçŠ¶æ€
./status.sh

# 2. å¯åŠ¨ç³»ç»Ÿ
./start.sh

# 3. æŸ¥çœ‹å®æ—¶æ—¥å¿—ï¼ˆå¦å¼€ç»ˆç«¯ï¼‰
./logs.sh
# é€‰æ‹© 1 æˆ– 2 æŸ¥çœ‹å®æ—¶æ—¥å¿—

# 4. å¦‚æœ‰é—®é¢˜ï¼Œåœæ­¢æœåŠ¡
./stop.sh
```

### ç”Ÿäº§ç¯å¢ƒç›‘æ§
```bash
# å®šæœŸçŠ¶æ€æ£€æŸ¥
./status.sh

# æŸ¥çœ‹æœåŠ¡æ—¥å¿—
./logs.sh

# å¯¼å‡ºæ—¥å¿—ç”¨äºåˆ†æ
./logs.sh
# é€‰æ‹© 7 å¯¼å‡ºæ—¥å¿—
```

### æ•…éšœæ’æŸ¥æµç¨‹
```bash
# 1. æ£€æŸ¥ç³»ç»ŸçŠ¶æ€
./status.sh

# 2. æŸ¥çœ‹é”™è¯¯æ—¥å¿—
./logs.sh
# é€‰æ‹© 3 æˆ– 4 æŸ¥çœ‹å†å²æ—¥å¿—

# 3. é‡å¯æœåŠ¡
./stop.sh
./start.sh

# 4. å®æ—¶ç›‘æ§
./view-backend-logs.sh  # æˆ– ./view-frontend-logs.sh
```

## ğŸ’¡ ä½¿ç”¨æŠ€å·§

### 1. å¿«é€Ÿå‘½ä»¤
```bash
# å¿«é€Ÿé‡å¯
./stop.sh && ./start.sh

# æ£€æŸ¥åé‡å¯
./status.sh && ./stop.sh && ./start.sh

# å®æ—¶ç›‘æ§ä¸¤ä¸ªæœåŠ¡ï¼ˆéœ€è¦ä¸¤ä¸ªç»ˆç«¯ï¼‰
./view-backend-logs.sh
./view-frontend-logs.sh
```

### 2. æ—¥å¿—ç®¡ç†
```bash
# å¿«é€ŸæŸ¥çœ‹æœ€è¿‘æ—¥å¿—
tail -20 backend/uvicorn.log
tail -20 frontend/nextjs.log

# æœç´¢é”™è¯¯æ—¥å¿—
grep -i error backend/uvicorn.log
grep -i error frontend/nextjs.log

# æŒ‰æ—¶é—´æŸ¥çœ‹æ—¥å¿—
grep "$(date '+%Y-%m-%d')" backend/uvicorn.log
```

### 3. è¿›ç¨‹ç®¡ç†
```bash
# æŸ¥çœ‹ç›¸å…³è¿›ç¨‹
ps aux | grep -E "(uvicorn|next)"

# æ‰‹åŠ¨ç»ˆæ­¢è¿›ç¨‹
pkill -f "uvicorn.*app.main"
pkill -f "next.*dev"

# æ£€æŸ¥ç«¯å£å ç”¨
lsof -i :8081
lsof -i :3000
```

## ğŸš¨ æ•…éšœå¤„ç†

### å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

#### 1. ç«¯å£è¢«å ç”¨
```bash
# æŸ¥çœ‹å ç”¨è¿›ç¨‹
lsof -i :8081
lsof -i :3000

# ç»ˆæ­¢å ç”¨è¿›ç¨‹
kill -9 <PID>

# æˆ–ä½¿ç”¨åœæ­¢è„šæœ¬
./stop.sh
```

#### 2. æœåŠ¡æ— æ³•å¯åŠ¨
```bash
# æ£€æŸ¥ç¯å¢ƒ
./status.sh env

# æ£€æŸ¥æ—¥å¿—
./logs.sh

# é‡æ–°å®‰è£…ä¾èµ–
cd backend
source venv/bin/activate
pip install -r requirements.txt

cd ../frontend
npm install
```

#### 3. æ—¥å¿—æ–‡ä»¶è¿‡å¤§
```bash
# æ¸…ç†æ—¥å¿—ï¼ˆä¼šè‡ªåŠ¨å¤‡ä»½ï¼‰
./logs.sh
# é€‰æ‹© 6 æ¸…ç†æ—¥å¿—æ–‡ä»¶

# æˆ–æ‰‹åŠ¨æ¸…ç†
> backend/uvicorn.log
> frontend/nextjs.log
```

## ğŸ“Š ç›‘æ§æŒ‡æ ‡

### å…³é”®æ£€æŸ¥é¡¹
- [ ] åç«¯æœåŠ¡è¿è¡ŒçŠ¶æ€
- [ ] å‰ç«¯æœåŠ¡è¿è¡ŒçŠ¶æ€
- [ ] ç«¯å£ç›‘å¬æƒ…å†µ
- [ ] APIå¥åº·æ£€æŸ¥
- [ ] æ—¥å¿—æ–‡ä»¶å¤§å°
- [ ] ç³»ç»Ÿèµ„æºä½¿ç”¨
- [ ] é”™è¯¯æ—¥å¿—æ•°é‡

### æ€§èƒ½ç›‘æ§
```bash
# ç³»ç»Ÿè´Ÿè½½
uptime

# å†…å­˜ä½¿ç”¨
free -h  # Linux
top -l 1 | grep PhysMem  # macOS

# ç£ç›˜ç©ºé—´
df -h

# è¿›ç¨‹èµ„æº
top | grep -E "(uvicorn|node)"
```

## ğŸ”„ è‡ªåŠ¨åŒ–å»ºè®®

### åˆ›å»ºå®šæ—¶ä»»åŠ¡
```bash
# ç¼–è¾‘å®šæ—¶ä»»åŠ¡
crontab -e

# æ¯å°æ—¶æ£€æŸ¥ç³»ç»ŸçŠ¶æ€
0 * * * * cd /path/to/project && ./status.sh >> status.log 2>&1

# æ¯å¤©æ¸…ç†å¤§æ—¥å¿—æ–‡ä»¶
0 2 * * * cd /path/to/project && find . -name "*.log" -size +100M -exec truncate -s 0 {} \;
```

### åˆ›å»ºå¿«æ·åˆ«å
```bash
# æ·»åŠ åˆ° ~/.bashrc æˆ– ~/.zshrc
alias kb-start='cd /path/to/project && ./start.sh'
alias kb-stop='cd /path/to/project && ./stop.sh'
alias kb-status='cd /path/to/project && ./status.sh'
alias kb-logs='cd /path/to/project && ./logs.sh'
```

---

**æ›´æ–°æ—¶é—´**: 2025-06-19  
**è„šæœ¬ç‰ˆæœ¬**: v2.4  
**ä½œè€…**: laladoko (å¾æ´ªæ£®) 